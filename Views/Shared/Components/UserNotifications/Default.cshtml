@model IEnumerable<LogisticaBroker.Models.Notification>

@{
    var count = Model.Count();
}

<li class="nav-item dropdown">
    <a class="nav-link text-dark position-relative" href="#" data-bs-toggle="dropdown">
        <i class="bi bi-bell-fill fs-5"></i>
        @if (count > 0)
        {
            <span class="position-absolute top-10 start-100 translate-middle badge rounded-pill bg-danger" style="font-size: 0.6rem;">
                @count
                <span class="visually-hidden">unread messages</span>
            </span>
        }
    </a>
    <ul class="dropdown-menu dropdown-menu-end" style="min-width: 300px;">
        <li><h6 class="dropdown-header">Notificaciones</h6></li>
        @if (Model.Any())
        {
            @foreach (var item in Model)
            {
                <li>
                    <a class="dropdown-item d-flex align-items-start p-2" 
                       asp-controller="Notifications" asp-action="ReadAndRedirect" asp-route-id="@item.Id">
                        <div class="me-2 mt-1">
                           <i class="bi bi-info-circle-fill text-primary"></i>
                        </div>
                        <div>
                            <strong>@item.Title</strong><br>
                            <small class="text-muted text-wrap">@item.Message</small>
                        </div>
                    </a>
                </li>
                <li><hr class="dropdown-divider"></li>
            }
        }
        else
        {
            <li><span class="dropdown-item-text text-muted">Sin novedades</span></li>
        }
        <li><a class="dropdown-item text-center small fw-bold" asp-controller="Notifications" asp-action="Index">Ver todas</a></li>
    </ul>
</li>